import 'package:{{ spec.title | caseDash }}/appwrite.dart';
import 'package:dio/dio.dart';
import 'package:mockito/mockito.dart';
import 'package:test/test.dart';

import '../mocks.dart';

void main() {
    DioMock dioMock = DioMock();
    Storage storage = Storage(Client(http: dioMock));

    test('should call client with proper parameters', () async {
        when(dioMock.get("/storage/files",
                queryParameters: {'search': 'abc', 'limit': 10, 'offset': 20, 'orderType': "DESC"},
                options: anyNamed('options')))
                .thenAnswer((_) => Future.value(Response(data: '"file" : "abc"', statusCode: 200)));
        Response response = await storage.listFiles(search: 'abc', limit: 10, offset: 20, orderType: OrderType.desc);
        expect(response.statusCode, equals(200));
    });
}