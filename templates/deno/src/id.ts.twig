export class ID {
    // Generate a unique ID based on timestamp
    // Recreated from https://www.php.net/manual/en/function.uniqid.php
    static #uniqueId(): string {
        const now = new Date();
        const secondsSinceEpoch = Math.floor(now.getTime() / 1000);
        const msecs = now.getTime() - secondsSinceEpoch * 1000;
        const microsecondsPart = msecs * 1000; // Convert milliseconds to microseconds

        // Convert to hexadecimal
        const hexTimestamp = secondsSinceEpoch.toString(16) + microsecondsPart.toString(16).padStart(5, '0');
        return hexTimestamp;
    }

    public static custom(id: string): string {
        return id
    }

    // Generate a unique ID with padding to have a longer ID
    // Recreated from https://github.com/utopia-php/database/blob/main/src/Database/ID.php#L13
    public static unique(padding: number = 7): string {
        const baseId = ID.#uniqueId();
        let randomPadding = '';

        for (let i = 0; i < padding; i++) {
            const randomHexDigit = Math.floor(Math.random() * 16).toString(16);
            randomPadding += randomHexDigit;
        }

        return baseId + randomPadding;
    }
}
