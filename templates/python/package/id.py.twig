from datetime import datetime
import random

class ID:
    # Generate an hex ID based on timestamp
    # Recreated from https://www.php.net/manual/en/function.uniqid.php
    @staticmethod
    def __hex_timestamp():
        now = datetime.now()
        seconds_since_epoch = int(now.timestamp())
        microseconds_part = now.microsecond
        hex_timestamp = f'{seconds_since_epoch:08x}{microseconds_part:05x}'
        return hex_timestamp

    @staticmethod
    def custom(id):
        return id

    # Generate a unique ID with padding to have a longer ID
    # Recreated from https://github.com/utopia-php/database/blob/main/src/Database/ID.php#L13
    @staticmethod
    def unique(padding = 7):
        base_id = ID.__hex_timestamp()
        random_padding = ''.join(random.choice('0123456789abcdef') for _ in range(padding))
        return base_id + random_padding
