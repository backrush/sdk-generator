{% if method.type == 'upload' %}
import 'dart:io';
{% endif %}
import 'package:{{ language.params.packageName }}/{{ language.params.packageName }}.dart';

{% if method.type == 'location' %}
Client client = Client();
{{ service.name | caseUcfirst }} {{ service.name | caseCamel }} = {{service.name | caseUcfirst}}(client);

{% if method.security|length > 0 %}
client
  .setEndpoint('https://[HOSTNAME_OR_IP]/v1') // Your API Endpoint
{% for node in method.security %}
{% for key,header in node|keys %}
  .set{{header}}('{{node[header]['x-appwrite']['demo']}}') // {{node[header].description}}
{% endfor %}
{% endfor %}  ;
{% endif %}

void main() { // Init SDK
  runApp(MyApp());
}

class MyApp extends StatelessWidget {
  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBer: AppBar(
        title: Text("Appwrite+Flutter Private Image"),
      ),
      body: Container(
        child: FutureBuilder(
              future: storage.getFilePreview(fileId: [FileId] ), //works for both public file and private file, for private files you need to be logged in
              builder: (context, snapshot) {
                return snapshot.hasData && snapshot.data != null
                    ? Image.memory(
                        snapshot.data.data,
                      )
                    : CircularProgressIndicator();
              },
            ),
      )
    )
  }
}

{% else %}

void main() { // Init SDK
  Client client = Client();
  {{ service.name | caseUcfirst }} {{ service.name | caseCamel }} = {{service.name | caseUcfirst}}(client);

{% if method.security|length > 0 %}
  client
    .setEndpoint('https://[HOSTNAME_OR_IP]/v1') // Your API Endpoint
{% for node in method.security %}
{% for key,header in node|keys %}
    .set{{header}}('{{node[header]['x-appwrite']['demo']}}') // {{node[header].description}}
{% endfor %}
{% endfor %}  ;

{% endif %}
  Future result = {{ service.name | caseCamel }}.{{ method.name | caseCamel }}({% for parameter in method.parameters.all %}
{% if loop.first %}

{% endif %}
{% if parameter.required %}
    {{ parameter.name | caseCamel }}: {{ parameter | paramExample }},
{% endif %}
{% endfor %}{% if method.parameters.all|length > 0 %}  {% endif %});

  result
    .then((response) {
      print(response);
    }).catchError((error) {
      print(error.response);
  });
}
{% endif %}