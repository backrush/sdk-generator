import { defineConfig } from 'tsup'
import { esbuildPluginFilePathExtensions } from 'esbuild-plugin-file-path-extensions'

export default defineConfig({
  entry: ["src/**/*.ts"],
  sourcemap: true,
  clean: true,
  dts: true,
  treeshake: true,
  outDir: "dist",
  esbuildPlugins: [esbuildPluginFilePathExtensions({ filter: /^\./ })],
  // Yes, bundle: true => https://github.com/favware/esbuild-plugin-file-path-extensions?tab=readme-ov-file#usage
  bundle: true,
  target: "node16",
  format: ['cjs', 'esm']
})