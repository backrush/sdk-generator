import { Blob, File } from "node-fetch-native";
import { realpathSync, readFileSync } from "fs";

export class InputFile {
  static fromBuffer(
    parts: ArrayBuffer | Blob | Buffer | string,
    name: string
  ): File {
    const blob = new Blob([parts]);
    return new File([blob], name);
  }

  static fromPath(path: string, name: string): File {
    const realPath = realpathSync(path);
    const contents = readFileSync(realPath);
    return this.fromBuffer(contents, name);
  }

  static fromPlainText(content: string, name: string): File {
    const arrayBytes = new TextEncoder().encode(content);
    return this.fromBuffer(arrayBytes, name);
  }
}
